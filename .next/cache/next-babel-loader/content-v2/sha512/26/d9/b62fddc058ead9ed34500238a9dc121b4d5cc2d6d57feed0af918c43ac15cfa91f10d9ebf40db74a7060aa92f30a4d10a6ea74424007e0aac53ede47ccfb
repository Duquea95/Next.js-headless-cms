{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/anthony/Documents/storefront-api-examples/swift_headless_cms/components/Product.js\";\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport VariantSelector from './VariantSelector';\n\nfunction Product(props) {\n  let defaultOptionValues = {};\n  props.product.options.forEach(selector => {\n    defaultOptionValues[selector.name] = selector.values[0];\n  });\n  const {\n    0: selectedOptions,\n    1: setSelectedOptions\n  } = useState(defaultOptionValues);\n  const {\n    0: variantImage,\n    1: setVariantImage\n  } = useState(props.product.images.edges[0].node);\n  const {\n    0: variant,\n    1: setVariant\n  } = useState(props.product.variants.edges[0].node);\n  const {\n    0: variantQuantity,\n    1: setVariantQuantity\n  } = useState(1);\n\n  const findImage = (images, variantId) => {\n    const primary = images[0];\n    const image = images.filter(function (image) {\n      return image.variant_ids.includes(variantId);\n    })[0];\n    return (image || primary).src;\n  };\n\n  const handleOptionChange = event => {\n    const target = event.target;\n    selectedOptions[target.name] = target.value;\n    const selectedVariant = props.product.variants.edges.find(variant => {\n      return variant.node.selectedOptions.every(selectedOption => {\n        return selectedOptions[selectedOption.name] === selectedOption.value;\n      });\n    }).node;\n    setVariant(selectedVariant);\n    setVariantImage(selectedVariant.image);\n  };\n\n  const handleQuantityChange = event => {\n    setVariantQuantity(event.target.value);\n  };\n\n  let variantSelectors = props.product.options.map(option => {\n    return /*#__PURE__*/_jsxDEV(VariantSelector, {\n      handleOptionChange: handleOptionChange,\n      option: option\n    }, option.id.toString(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Product\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      href: `/product/${encodeURIComponent(props.product.title)}`,\n      children: props.product.images.edges.length ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: variantImage.src,\n        alt: `${props.product.title} product shot`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 48\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"Product__title\",\n      children: props.product.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"Product__price\",\n      children: [\"$\", variant.price]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), variantSelectors, /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"Product__option\",\n      children: [\"Quantity\", /*#__PURE__*/_jsxDEV(\"input\", {\n        min: \"1\",\n        type: \"number\",\n        defaultValue: variantQuantity,\n        onChange: handleQuantityChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"Product__buy button\",\n      onClick: () => props.addVariantToCart(variant.id, variantQuantity),\n      children: \"Add to Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\nexport default Product;","map":{"version":3,"sources":["/Users/anthony/Documents/storefront-api-examples/swift_headless_cms/components/Product.js"],"names":["React","useState","Link","VariantSelector","Product","props","defaultOptionValues","product","options","forEach","selector","name","values","selectedOptions","setSelectedOptions","variantImage","setVariantImage","images","edges","node","variant","setVariant","variants","variantQuantity","setVariantQuantity","findImage","variantId","primary","image","filter","variant_ids","includes","src","handleOptionChange","event","target","value","selectedVariant","find","every","selectedOption","handleQuantityChange","variantSelectors","map","option","id","toString","encodeURIComponent","title","length","price","addVariantToCart"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Link from 'next/link'\nimport VariantSelector from './VariantSelector';\n\nfunction Product(props){\n  let defaultOptionValues = {};\n\n  props.product.options.forEach((selector) => {\n    defaultOptionValues[selector.name] = selector.values[0];\n  });\n\n  const [selectedOptions,setSelectedOptions] = useState(defaultOptionValues);\n\n  const [variantImage,setVariantImage] = useState(props.product.images.edges[0].node);\n  const [variant,setVariant] = useState(props.product.variants.edges[0].node);\n  const [variantQuantity,setVariantQuantity] = useState(1);\n\n  const findImage = (images, variantId) => {\n    const primary = images[0];\n\n    const image = images.filter(function (image) {\n      return image.variant_ids.includes(variantId);\n    })[0];\n\n    return (image || primary).src;\n  }\n\n  const handleOptionChange = (event) => {\n    const target = event.target\n    selectedOptions[target.name] = target.value;\n\n    const selectedVariant = props.product.variants.edges.find((variant) => {\n      return variant.node.selectedOptions.every((selectedOption) => {\n        return selectedOptions[selectedOption.name] === selectedOption.value;\n      });\n    }).node;\n\n    setVariant(selectedVariant);\n    setVariantImage(selectedVariant.image);\n  }\n\n  const handleQuantityChange = (event) => {\n    setVariantQuantity(event.target.value);\n  }\n\n\n  let variantSelectors = props.product.options.map((option) => {\n    return (\n      <VariantSelector\n        handleOptionChange={handleOptionChange}\n        key={option.id.toString()}\n        option={option}\n      />\n    );\n  });\n\n  return (\n    <div className=\"Product\">\n      <Link href={`/product/${encodeURIComponent(props.product.title)}`}>\n          {props.product.images.edges.length ? <img src={variantImage.src} alt={`${props.product.title} product shot`}/> : null}\n      </Link>\n      <h5 className=\"Product__title\">{props.product.title}</h5>\n      <span className=\"Product__price\">${variant.price}</span>\n      {variantSelectors}\n      <label className=\"Product__option\">\n        Quantity\n        <input min=\"1\" type=\"number\" defaultValue={variantQuantity} onChange={handleQuantityChange}></input>\n      </label>\n      <button className=\"Product__buy button\" onClick={() => props.addVariantToCart(variant.id, variantQuantity)}>Add to Cart</button>\n    </div>\n  );\n}\n\nexport default Product;\n"]},"metadata":{},"sourceType":"module"}